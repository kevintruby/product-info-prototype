(function(t){function e(e){for(var n,i,a=e[0],s=e[1],u=e[2],l=0,f=[];l<a.length;l++)i=a[l],c[i]&&f.push(c[i][0]),c[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,a=1;a<r.length;a++){var s=r[a];0!==c[s]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},c={app:0},o=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var d=s;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"21bb":function(t,e,r){"use strict";var n=r("bcc9"),c=r.n(n);c.a},"34dc":function(t,e,r){"use strict";var n=r("3abf"),c=r.n(n);c.a},"3abf":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("a026"),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],i=r("cebc"),a=r("2f62"),s={name:"AppContainer",mounted:function(){this.updateBearerToken()},computed:Object(i["a"])({},Object(a["e"])("session",["api_bearer_token"])),watch:{api_bearer_token:function(t,e){t&&t.constructor===String&&t.length&&""===e&&this.getProducts()}},methods:Object(i["a"])({},Object(a["b"])("products",["getProducts"]),Object(a["b"])("session",["updateBearerToken"]))},u=s,d=(r("5c0b"),r("2877")),l=Object(d["a"])(u,c,o,!1,null,null,null),f=l.exports,p=r("8c4f"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("img",{attrs:{alt:"Vue logo",src:r("cf05")}}),n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getProducts,expression:"getProducts"}],staticClass:"container mt-5",attrs:{"infinite-scroll-disabled":"is_token_set"}},[n("h3",[t._v("Click a product for more info")]),n("transition-group",{staticClass:"row",attrs:{name:"fade",tag:"div"}},t._l(t.products,function(t){return n("product-result",{key:t.id,staticClass:"col col-6 col-lg-2",attrs:{product:t}})}),1),n("transition",{attrs:{name:"fade"}},[t.product_limit_reached?t._e():n("p",[n("em",[t._v("Scroll for more products...")])])])],1),n("b-modal",{attrs:{id:"productDetails",centered:"","ok-only":"",size:"lg",title:"Product Info"}},[n("div",[n("img",{staticClass:"img-fluid mb-5",attrs:{src:t.selected_product.detail_img_url,alt:t.selected_product.name}}),n("p",[n("strong",[t._v("Name: ")]),n("span",{domProps:{innerHTML:t._s(t.selected_product.name)}})]),n("p",[n("strong",[t._v("Description: ")]),n("span",{domProps:{innerHTML:t._s(t.selected_product.description)}})]),n("p",[n("strong",[t._v("Price: ")]),t._v(t._s(t.selected_product.price))]),t.selected_product.is_organic?n("img",{staticClass:"img-fluid",attrs:{src:t.selected_product.badges.organic.badge_url,alt:"Organic Product"}}):t._e()])])],1)},h=[],b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-tile",on:{click:t.showDetails}},[r("img",{staticClass:"img-fluid",attrs:{src:t.product.thumbnail_img_url,alt:t.product.name}}),r("p",{domProps:{innerHTML:t._s(t.product.name)}})])},g=[],_=(r("c5f6"),r("7f7f"),r("20d6"),r("d225")),v=r("b0b4"),j=r("bd86"),k=r("2ef0"),O={get:k["get"]},P="https://1b0bbb9e89b4713adcc7-aea4cee2cb18344b328e3a03eff3ec4f.ssl.cf1.rackcdn.com/5e85d71501308335-L2AE6hCf-thumb.jpg",y=function(){function t(e){Object(_["a"])(this,t),Object(j["a"])(this,"badges",{organic:{badge_url:P}}),this.id=O.get(e,"id",""),this.name=O.get(e,"name","N/A"),this.description=O.get(e,"description","N/A"),this.images=O.get(e,"images",[]),this.attributes=O.get(e,"attributes",[]),this.cent_amount=O.get(e,"cent_amount",0)}return Object(v["a"])(t,[{key:"detail_img_url",get:function(){var t=function(){var t=new A;return t.detail_fallback};if(!this.images||this.images.constructor!==Array||!this.images.length)return t();if(1===this.images.length){var e=this.images[0];return e&&e.constructor===A&&e.url.length?e.url:t()}var r=this.images[1];if(!r||r.constructor!==A||!r.url.length)return t();if(r.url===r.detail_fallback){var n=this.thumbnail_img_url;if(n!==r.thumbnail_fallback)return n}return r.url}},{key:"is_organic",get:function(){if(!this.attributes||this.attributes.constructor!==Array)return!1;var t=this.attributes.findIndex(function(t){return!(!t||t.constructor!==w)&&("organic"===t.name.toLowerCase()&&!0===t.value)});return t>-1}},{key:"price",get:function(){if(!this.cent_amount||this.cent_amount.constructor!==Number||0===this.cent_amount)return"N/A";var t=Number(this.cent_amount/100);return"$".concat(t.toFixed(2))}},{key:"thumbnail_img_url",get:function(){var t=function(){var t=new A;return t.thumbnail_fallback};if(!this.images||this.images.constructor!==Array||!this.images.length)return t();var e=this.images[0];return e&&e.constructor===A&&e.url.length?e.url:t()}}]),t}(),w=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_["a"])(this,t),this.name=O.get(e,"name",""),this.value=O.get(e,"value",null)},A=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_["a"])(this,t),Object(j["a"])(this,"detail_fallback","https://1b0bbb9e89b4713adcc7-aea4cee2cb18344b328e3a03eff3ec4f.ssl.cf1.rackcdn.com/ece4edb2868a8225.cro-U2aFaCJE.jpg"),Object(j["a"])(this,"thumbnail_fallback","https://1b0bbb9e89b4713adcc7-aea4cee2cb18344b328e3a03eff3ec4f.ssl.cf1.rackcdn.com/ece4edb2868a8225.cro-U2aFaCJE-thumb.jpg"),this.dimensions=O.get(e,"dimensions",{w:0,h:0}),this.label=O.get(e,"label",""),this.url=O.get(e,"url","")},x={name:"ProductResult",props:{product:{required:!0,type:y}},methods:Object(i["a"])({},Object(a["d"])("products",["selectProduct"]),{showDetails:function(){this.selectProduct(this.product.id),this.$root.$emit("bv::show::modal","productDetails")}})},C=x,S=(r("34dc"),Object(d["a"])(C,b,g,!1,null,null,null)),T=S.exports,N=r("3a5b"),B=r.n(N),E=r("487a"),$=r.n(E),L={name:"Home",components:{BModal:B.a,ProductResult:T},directives:{infiniteScroll:$.a},mounted:function(){this.$root.$on("bv::hide::modal",this.clearSelectedProduct)},computed:Object(i["a"])({},Object(a["c"])("products",["product_limit_reached","selected_product"]),Object(a["c"])("session",["is_token_set"]),Object(a["e"])("products",["products","selected_product_id"])),methods:Object(i["a"])({},Object(a["b"])("products",["getProducts"]),Object(a["d"])("products",["clearSelectedProduct"]))},M=L,D=(r("21bb"),Object(d["a"])(M,m,h,!1,null,null,null)),F=D.exports;n["default"].use(p["a"]);var H=new p["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:F}]}),R=(r("ac6a"),r("7514"),{get:k["get"]}),I=function(t){if(t&&t.constructor===Object){var e="masterData.current",r="".concat(e,".masterVariant"),n={id:R.get(t,"id",""),name:R.get(t,"".concat(e,".name.en"),"N/A"),description:R.get(t,"".concat(e,".description.en"),"N/A"),cent_amount:R.get(t,"".concat(r,".prices[0].value.centAmount"),0),images:[],attributes:[]},c=R.get(t,"".concat(r,".images"),[]),o=R.get(t,"".concat(r,".attributes"),[]);return c&&c.constructor===Array&&c.forEach(function(t){return n.images.push(new A(t))}),o&&o.constructor===Array&&o.forEach(function(t){return n.attributes.push(new w(t))}),new y(n)}},J=r("bc3a"),q=r.n(J);q.a.defaults.baseURL="https://api.commercetools.co/nuts-custom-demo-1";var z=12,U={fetching_products:!1,products:[],product_request_limit:z,product_result_limit:2*z,selected_product_id:null},Z={product_ids:function(t){return t.products.map(function(t){return t.id})},product_limit_reached:function(t){return t.products.length>=t.product_result_limit},selected_product:function(t,e){if(null===t.selected_product_id||-1===e.product_ids.indexOf(t.selected_product_id))return new y;var r=t.products.find(function(e){return e.id===t.selected_product_id});return r&&r.constructor===y?r:new y}},V={getProducts:function(t){var e=t.commit,r=t.state;if(!r.fetching_products){e("setFetchingProductsState",!0);var n="/products?offset=".concat(r.products.length,"&limit=").concat(r.product_request_limit);q.a.get(n).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;if(n&&n.constructor===Object){var c=n.results,o=void 0===c?[]:c,i=n.total,a=void 0===i?0:i,s=[];o&&o.constructor===Array&&o.forEach(function(t){var e=I(t);e&&e.constructor===y&&s.push(e)}),s.length&&e("addProducts",s),a&&a.constructor===Number&&a!==r.product_result_limit&&e("setTotalProductCount",a)}}).catch(function(t){return console.error(t)}).then(function(){return e("setFetchingProductsState",!1)})}}},G={addProducts:function(t,e){if(e&&e.constructor===Array){var r=e.filter(function(e){return-1===t.products.findIndex(function(t){return t.id===e.id})});r.forEach(function(e){return t.products.push(e)})}},clearSelectedProduct:function(t){t.selected_product_id=null},selectProduct:function(t,e){e&&e.constructor===String&&(t.selected_product_id=e)},setFetchingProductsState:function(t,e){void 0!==e&&null!==e&&!e.constructor!==Boolean&&(t.fetching_products=e)},setTotalProductCount:function(t,e){e&&e.constructor===Number&&(t.product_result_limit=e)}},K={namespaced:!0,state:U,getters:Z,actions:V,mutations:G},Q={api_bearer_token:""},W={is_token_set:function(t){return""===t.api_bearer_token}},X={setAxiosAuthHeader:function(t){var e=t.state;q.a.defaults.headers.common["Authorization"]="Bearer ".concat(e.api_bearer_token)},updateBearerToken:function(t){var e=t.commit,r=t.dispatch,n="grant_type=client_credentials&scope=view_products:nuts-custom-demo-1",c="https://auth.commercetools.co/oauth/token",o=q.a.create({auth:{username:"BZaa-av5L6RmZKlPgZaGNkea",password:"jchbf_Q5zRWCaEg4TCB4m9cLIioPiml0"}});o.post(c,n).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;if(n&&n.constructor===Object){var c=n.access_token,o=void 0===c?"":c,i=n.expires_in;o&&o.constructor===String&&o.length&&(e("setBearerToken",o),r("setAxiosAuthHeader"),i&&i.constructor===Number&&setTimeout(function(){return r("updateBearerToken")},1e3*i))}}).catch(function(t){return console.error(t)})}},Y={setBearerToken:function(t,e){e&&e.constructor===String&&e.length&&(t.api_bearer_token=e)}},tt={namespaced:!0,state:Q,getters:W,actions:X,mutations:Y};n["default"].use(a["a"]);var et=new a["a"].Store({modules:{products:K,session:tt},state:{},mutations:{},actions:{}});n["default"].config.productionTip=!1,new n["default"]({router:H,store:et,render:function(t){return t(f)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var n=r("5e27"),c=r.n(n);c.a},"5e27":function(t,e,r){},bcc9:function(t,e,r){},cf05:function(t,e,r){t.exports=r.p+"img/logo.82b9c7a5.png"}});